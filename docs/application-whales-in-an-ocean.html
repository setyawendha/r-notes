<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Beginning Computer Science with R</title>
  <meta name="description" content="Notes for Computer Science 115 and 215 at Georgetown College, Kentucky. The language of instruction is R.">
  <meta name="generator" content="bookdown 0.5 and GitBook 2.6.7">

  <meta property="og:title" content="Beginning Computer Science with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Notes for Computer Science 115 and 215 at Georgetown College, Kentucky. The language of instruction is R." />
  <meta name="github-repo" content="homerhanumat/r-notes" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Beginning Computer Science with R" />
  
  <meta name="twitter:description" content="Notes for Computer Science 115 and 215 at Georgetown College, Kentucky. The language of instruction is R." />
  

<meta name="author" content="Homer White">


<meta name="date" content="2017-09-06">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="method-chaining.html">
<link rel="next" href="generic-function-oo.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="index.html">Beginning Computer Programming with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="0.1" data-path="the-why-of-these-notes-remarks-for-colleagues.html"><a href="the-why-of-these-notes-remarks-for-colleagues.html"><i class="fa fa-check"></i><b>0.1</b> The Why of these Notes: Remarks for Colleagues</a></li>
<li class="chapter" data-level="0.2" data-path="history-of-r.html"><a href="history-of-r.html"><i class="fa fa-check"></i><b>0.2</b> History of R</a></li>
<li class="chapter" data-level="0.3" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i><b>0.3</b> Acknowledgements</a></li>
<li class="chapter" data-level="0.4" data-path="miscellaneous-information.html"><a href="miscellaneous-information.html"><i class="fa fa-check"></i><b>0.4</b> Miscellaneous Information</a><ul>
<li class="chapter" data-level="0.4.1" data-path="miscellaneous-information.html"><a href="miscellaneous-information.html#typographical-conventions"><i class="fa fa-check"></i><b>0.4.1</b> Typographical Conventions</a></li>
<li class="chapter" data-level="0.4.2" data-path="miscellaneous-information.html"><a href="miscellaneous-information.html#license"><i class="fa fa-check"></i><b>0.4.2</b> License</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="idea.html"><a href="idea.html"><i class="fa fa-check"></i><b>1</b> Our First Computer Programs</a><ul>
<li class="chapter" data-level="1.1" data-path="hello-world.html"><a href="hello-world.html"><i class="fa fa-check"></i><b>1.1</b> Hello, World!</a></li>
<li class="chapter" data-level="1.2" data-path="idea-tour.html"><a href="idea-tour.html"><i class="fa fa-check"></i><b>1.2</b> A Quick Tour</a><ul>
<li class="chapter" data-level="1.2.1" data-path="idea-tour.html"><a href="idea-tour.html#idea-arithmetic"><i class="fa fa-check"></i><b>1.2.1</b> Basic Arithmetic</a></li>
<li class="chapter" data-level="1.2.2" data-path="idea-tour.html"><a href="idea-tour.html#read-evaluate-print-loop"><i class="fa fa-check"></i><b>1.2.2</b> Read-Evaluate-Print-Loop</a></li>
<li class="chapter" data-level="1.2.3" data-path="idea-tour.html"><a href="idea-tour.html#idea-variables"><i class="fa fa-check"></i><b>1.2.3</b> Variables</a></li>
<li class="chapter" data-level="1.2.4" data-path="idea-tour.html"><a href="idea-tour.html#idea-functions"><i class="fa fa-check"></i><b>1.2.4</b> Functions</a></li>
<li class="chapter" data-level="1.2.5" data-path="idea-tour.html"><a href="idea-tour.html#idea-data"><i class="fa fa-check"></i><b>1.2.5</b> Data and Graphics</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="idea-debugging.html"><a href="idea-debugging.html"><i class="fa fa-check"></i><b>1.3</b> Debugging</a></li>
<li class="chapter" data-level="" data-path="idea-glossary.html"><a href="idea-glossary.html"><i class="fa fa-check"></i>Glossary</a></li>
<li class="chapter" data-level="" data-path="idea-exercises.html"><a href="idea-exercises.html"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i><b>2</b> Vectors</a><ul>
<li class="chapter" data-level="2.1" data-path="what-is-a-vector.html"><a href="what-is-a-vector.html"><i class="fa fa-check"></i><b>2.1</b> What is a Vector?</a><ul>
<li class="chapter" data-level="2.1.1" data-path="what-is-a-vector.html"><a href="what-is-a-vector.html#types-of-atomic-vectors"><i class="fa fa-check"></i><b>2.1.1</b> Types of Atomic Vectors</a></li>
<li class="chapter" data-level="2.1.2" data-path="what-is-a-vector.html"><a href="what-is-a-vector.html#coercion"><i class="fa fa-check"></i><b>2.1.2</b> Coercion</a></li>
<li class="chapter" data-level="2.1.3" data-path="what-is-a-vector.html"><a href="what-is-a-vector.html#combining-vectors"><i class="fa fa-check"></i><b>2.1.3</b> Combining Vectors</a></li>
<li class="chapter" data-level="2.1.4" data-path="what-is-a-vector.html"><a href="what-is-a-vector.html#na-values"><i class="fa fa-check"></i><b>2.1.4</b> NA Values </a></li>
<li class="chapter" data-level="2.1.5" data-path="what-is-a-vector.html"><a href="what-is-a-vector.html#everything-in-r-is-a-vector"><i class="fa fa-check"></i><b>2.1.5</b> “Everything in R is a Vector”</a></li>
<li class="chapter" data-level="2.1.6" data-path="what-is-a-vector.html"><a href="what-is-a-vector.html#named-vectors"><i class="fa fa-check"></i><b>2.1.6</b> Named Vectors</a></li>
<li class="chapter" data-level="2.1.7" data-path="what-is-a-vector.html"><a href="what-is-a-vector.html#special-character-vectors"><i class="fa fa-check"></i><b>2.1.7</b> Special Character Vectors</a></li>
<li class="chapter" data-level="2.1.8" data-path="what-is-a-vector.html"><a href="what-is-a-vector.html#length-of-vectors"><i class="fa fa-check"></i><b>2.1.8</b> Length of Vectors</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="constructing-patterned-vectors.html"><a href="constructing-patterned-vectors.html"><i class="fa fa-check"></i><b>2.2</b> Constructing Patterned Vectors</a><ul>
<li class="chapter" data-level="2.2.1" data-path="constructing-patterned-vectors.html"><a href="constructing-patterned-vectors.html#sequencing"><i class="fa fa-check"></i><b>2.2.1</b> Sequencing</a></li>
<li class="chapter" data-level="2.2.2" data-path="constructing-patterned-vectors.html"><a href="constructing-patterned-vectors.html#repeating"><i class="fa fa-check"></i><b>2.2.2</b> Repeating</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="subsetting-vectors.html"><a href="subsetting-vectors.html"><i class="fa fa-check"></i><b>2.3</b> Subsetting Vectors</a></li>
<li class="chapter" data-level="2.4" data-path="more-on-logical-vectors.html"><a href="more-on-logical-vectors.html"><i class="fa fa-check"></i><b>2.4</b> More on Logical Vectors</a><ul>
<li class="chapter" data-level="2.4.1" data-path="more-on-logical-vectors.html"><a href="more-on-logical-vectors.html#boolean-operators"><i class="fa fa-check"></i><b>2.4.1</b> Boolean Operators</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="vector-recycling.html"><a href="vector-recycling.html"><i class="fa fa-check"></i><b>2.5</b> Vector Recycling </a></li>
<li class="chapter" data-level="2.6" data-path="subsetting-with-logical-vectors.html"><a href="subsetting-with-logical-vectors.html"><i class="fa fa-check"></i><b>2.6</b> Subsetting with Logical Vectors</a><ul>
<li class="chapter" data-level="2.6.1" data-path="subsetting-with-logical-vectors.html"><a href="subsetting-with-logical-vectors.html#counting"><i class="fa fa-check"></i><b>2.6.1</b> Counting</a></li>
<li class="chapter" data-level="2.6.2" data-path="subsetting-with-logical-vectors.html"><a href="subsetting-with-logical-vectors.html#cautions-about-na"><i class="fa fa-check"></i><b>2.6.2</b> Cautions about NA</a></li>
<li class="chapter" data-level="2.6.3" data-path="subsetting-with-logical-vectors.html"><a href="subsetting-with-logical-vectors.html#which-any-all"><i class="fa fa-check"></i><b>2.6.3</b> Which, Any, All</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="basic-arithmetical-operations-on-vectors.html"><a href="basic-arithmetical-operations-on-vectors.html"><i class="fa fa-check"></i><b>2.7</b> Basic Arithmetical Operations on Vectors</a><ul>
<li class="chapter" data-level="2.7.1" data-path="basic-arithmetical-operations-on-vectors.html"><a href="basic-arithmetical-operations-on-vectors.html#more-math-functions"><i class="fa fa-check"></i><b>2.7.1</b> More Math Functions</a></li>
<li class="chapter" data-level="2.7.2" data-path="basic-arithmetical-operations-on-vectors.html"><a href="basic-arithmetical-operations-on-vectors.html#na-and-nan-considerations"><i class="fa fa-check"></i><b>2.7.2</b> NA and NaN Considerations</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="further-notes-on-syntax.html"><a href="further-notes-on-syntax.html"><i class="fa fa-check"></i><b>2.8</b> Further Notes on Syntax</a><ul>
<li class="chapter" data-level="2.8.1" data-path="further-notes-on-syntax.html"><a href="further-notes-on-syntax.html#syntax-errors-vs.run-time-errors-vs.semantic-errors"><i class="fa fa-check"></i><b>2.8.1</b> Syntax Errors vs. Run-time Errors vs. Semantic Errors</a></li>
<li class="chapter" data-level="2.8.2" data-path="further-notes-on-syntax.html"><a href="further-notes-on-syntax.html#the-assignment-operator"><i class="fa fa-check"></i><b>2.8.2</b> The Assignment Operator</a></li>
<li class="chapter" data-level="2.8.3" data-path="further-notes-on-syntax.html"><a href="further-notes-on-syntax.html#multiple-expressions"><i class="fa fa-check"></i><b>2.8.3</b> Multiple Expressions</a></li>
<li class="chapter" data-level="2.8.4" data-path="further-notes-on-syntax.html"><a href="further-notes-on-syntax.html#variable-names-and-reserved-words"><i class="fa fa-check"></i><b>2.8.4</b> Variable Names and Reserved Words</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html"><i class="fa fa-check"></i>Glossary</a></li>
<li class="chapter" data-level="" data-path="exercises.html"><a href="exercises.html"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>3</b> Functions</a><ul>
<li class="chapter" data-level="3.1" data-path="motivation-for-functions.html"><a href="motivation-for-functions.html"><i class="fa fa-check"></i><b>3.1</b> Motivation for Functions</a></li>
<li class="chapter" data-level="3.2" data-path="function-syntax.html"><a href="function-syntax.html"><i class="fa fa-check"></i><b>3.2</b> Function Syntax</a></li>
<li class="chapter" data-level="3.3" data-path="what-a-function-returns.html"><a href="what-a-function-returns.html"><i class="fa fa-check"></i><b>3.3</b> What a Function Returns</a><ul>
<li class="chapter" data-level="3.3.1" data-path="what-a-function-returns.html"><a href="what-a-function-returns.html#the-final-expression-evaluated"><i class="fa fa-check"></i><b>3.3.1</b> The Final Expression Evaluated</a></li>
<li class="chapter" data-level="3.3.2" data-path="what-a-function-returns.html"><a href="what-a-function-returns.html#the-return-function"><i class="fa fa-check"></i><b>3.3.2</b> The <code>return()</code> Function</a></li>
<li class="chapter" data-level="3.3.3" data-path="what-a-function-returns.html"><a href="what-a-function-returns.html#writing-a-talky-function"><i class="fa fa-check"></i><b>3.3.3</b> Writing a “Talky” Function</a></li>
<li class="chapter" data-level="3.3.4" data-path="what-a-function-returns.html"><a href="what-a-function-returns.html#the-print-function"><i class="fa fa-check"></i><b>3.3.4</b> The <code>print()</code> Function</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="more-about-arguments.html"><a href="more-about-arguments.html"><i class="fa fa-check"></i><b>3.4</b> More About Arguments</a><ul>
<li class="chapter" data-level="3.4.1" data-path="more-about-arguments.html"><a href="more-about-arguments.html#default-arguments"><i class="fa fa-check"></i><b>3.4.1</b> Default Arguments</a></li>
<li class="chapter" data-level="3.4.2" data-path="more-about-arguments.html"><a href="more-about-arguments.html#argument-matching"><i class="fa fa-check"></i><b>3.4.2</b> Argument-Matching</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="environments-and-scope.html"><a href="environments-and-scope.html"><i class="fa fa-check"></i><b>3.5</b> Environments and Scope</a><ul>
<li class="chapter" data-level="3.5.1" data-path="environments-and-scope.html"><a href="environments-and-scope.html#environments-and-searching"><i class="fa fa-check"></i><b>3.5.1</b> Environments and Searching</a></li>
<li class="chapter" data-level="3.5.2" data-path="environments-and-scope.html"><a href="environments-and-scope.html#function-environments"><i class="fa fa-check"></i><b>3.5.2</b> Function Environments</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="note-on-packages.html"><a href="note-on-packages.html"><i class="fa fa-check"></i><b>3.6</b> A Note on Packages</a><ul>
<li class="chapter" data-level="3.6.1" data-path="note-on-packages.html"><a href="note-on-packages.html#installed-packages"><i class="fa fa-check"></i><b>3.6.1</b> Installed Packages</a></li>
<li class="chapter" data-level="3.6.2" data-path="note-on-packages.html"><a href="note-on-packages.html#learning-about-a-package"><i class="fa fa-check"></i><b>3.6.2</b> Learning About a Package</a></li>
<li class="chapter" data-level="3.6.3" data-path="note-on-packages.html"><a href="note-on-packages.html#installing-packages"><i class="fa fa-check"></i><b>3.6.3</b> Installing Packages</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="more-to-learn.html"><a href="more-to-learn.html"><i class="fa fa-check"></i><b>3.7</b> More to Learn</a></li>
<li class="chapter" data-level="" data-path="glossary-1.html"><a href="glossary-1.html"><i class="fa fa-check"></i>Glossary</a></li>
<li class="chapter" data-level="" data-path="exercises-1.html"><a href="exercises-1.html"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="flow.html"><a href="flow.html"><i class="fa fa-check"></i><b>4</b> Flow-Control</a><ul>
<li class="chapter" data-level="4.1" data-path="prologue-prompting-the-user.html"><a href="prologue-prompting-the-user.html"><i class="fa fa-check"></i><b>4.1</b> Prologue: Prompting the User</a></li>
<li class="chapter" data-level="4.2" data-path="making-decisions-conditionals.html"><a href="making-decisions-conditionals.html"><i class="fa fa-check"></i><b>4.2</b> Making Decisions: Conditionals</a><ul>
<li class="chapter" data-level="4.2.1" data-path="making-decisions-conditionals.html"><a href="making-decisions-conditionals.html#if-statements"><i class="fa fa-check"></i><b>4.2.1</b> If Statements</a></li>
<li class="chapter" data-level="4.2.2" data-path="making-decisions-conditionals.html"><a href="making-decisions-conditionals.html#invisible-returns"><i class="fa fa-check"></i><b>4.2.2</b> Application: Invisible Returns</a></li>
<li class="chapter" data-level="4.2.3" data-path="making-decisions-conditionals.html"><a href="making-decisions-conditionals.html#ifelse"><i class="fa fa-check"></i><b>4.2.3</b> Ifelse</a></li>
<li class="chapter" data-level="4.2.4" data-path="making-decisions-conditionals.html"><a href="making-decisions-conditionals.html#switch"><i class="fa fa-check"></i><b>4.2.4</b> Switch</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="repeating-things-looping.html"><a href="repeating-things-looping.html"><i class="fa fa-check"></i><b>4.3</b> Repeating Things: Looping</a><ul>
<li class="chapter" data-level="4.3.1" data-path="repeating-things-looping.html"><a href="repeating-things-looping.html#for-loops"><i class="fa fa-check"></i><b>4.3.1</b> For Loops</a></li>
<li class="chapter" data-level="4.3.2" data-path="repeating-things-looping.html"><a href="repeating-things-looping.html#for-loop-caution"><i class="fa fa-check"></i><b>4.3.2</b> For-Loop Caution</a></li>
<li class="chapter" data-level="4.3.3" data-path="repeating-things-looping.html"><a href="repeating-things-looping.html#breaking-out-of-a-loop"><i class="fa fa-check"></i><b>4.3.3</b> Breaking Out of a Loop</a></li>
<li class="chapter" data-level="4.3.4" data-path="repeating-things-looping.html"><a href="repeating-things-looping.html#solving-the-empty-vector-problem-in-for-loops-with-seq_along"><i class="fa fa-check"></i><b>4.3.4</b> Solving the Empty-Vector Problem in <code>for</code>-Loops with <code>seq_along()</code></a></li>
<li class="chapter" data-level="4.3.5" data-path="repeating-things-looping.html"><a href="repeating-things-looping.html#skipping-ahead-in-a-loop"><i class="fa fa-check"></i><b>4.3.5</b> Skipping Ahead in a Loop</a></li>
<li class="chapter" data-level="4.3.6" data-path="repeating-things-looping.html"><a href="repeating-things-looping.html#repeat"><i class="fa fa-check"></i><b>4.3.6</b> Repeat</a></li>
<li class="chapter" data-level="4.3.7" data-path="repeating-things-looping.html"><a href="repeating-things-looping.html#while"><i class="fa fa-check"></i><b>4.3.7</b> While</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="collatz-conjecture.html"><a href="collatz-conjecture.html"><i class="fa fa-check"></i><b>4.4</b> Application: The Collatz Conjecture</a></li>
<li class="chapter" data-level="" data-path="glossary-2.html"><a href="glossary-2.html"><i class="fa fa-check"></i>Glossary</a></li>
<li class="chapter" data-level="" data-path="exercises-2.html"><a href="exercises-2.html"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="turtle.html"><a href="turtle.html"><i class="fa fa-check"></i><b>5</b> Turtle Graphics</a><ul>
<li class="chapter" data-level="5.1" data-path="basic-movements.html"><a href="basic-movements.html"><i class="fa fa-check"></i><b>5.1</b> Basic Movements</a></li>
<li class="chapter" data-level="5.2" data-path="making-many-movements-an-introduction-to-looping.html"><a href="making-many-movements-an-introduction-to-looping.html"><i class="fa fa-check"></i><b>5.2</b> Making Many Movements: An Introduction to Looping</a></li>
<li class="chapter" data-level="5.3" data-path="writing-turtle-functions.html"><a href="writing-turtle-functions.html"><i class="fa fa-check"></i><b>5.3</b> Writing Turtle Functions</a></li>
<li class="chapter" data-level="5.4" data-path="random-moves.html"><a href="random-moves.html"><i class="fa fa-check"></i><b>5.4</b> Random Moves</a><ul>
<li class="chapter" data-level="5.4.1" data-path="random-moves.html"><a href="random-moves.html#sampling-from-a-vector"><i class="fa fa-check"></i><b>5.4.1</b> Sampling from a Vector</a></li>
<li class="chapter" data-level="5.4.2" data-path="random-moves.html"><a href="random-moves.html#application-a-bouncing-turtle"><i class="fa fa-check"></i><b>5.4.2</b> Application: a Bouncing Turtle</a></li>
<li class="chapter" data-level="5.4.3" data-path="random-moves.html"><a href="random-moves.html#uniform-random-numbers"><i class="fa fa-check"></i><b>5.4.3</b> Uniform Random Numbers</a></li>
<li class="chapter" data-level="5.4.4" data-path="random-moves.html"><a href="random-moves.html#pseudo-randomness-and-setting-a-seed"><i class="fa fa-check"></i><b>5.4.4</b> Pseudo-Randomness and Setting a Seed</a></li>
<li class="chapter" data-level="5.4.5" data-path="random-moves.html"><a href="random-moves.html#drunken-turtle-intro"><i class="fa fa-check"></i><b>5.4.5</b> Application: a Drunken Turtle</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="more-complex-turtle-graphs.html"><a href="more-complex-turtle-graphs.html"><i class="fa fa-check"></i><b>5.5</b> More Complex Turtle Graphs</a></li>
<li class="chapter" data-level="" data-path="glossary-3.html"><a href="glossary-3.html"><i class="fa fa-check"></i>Glossary</a></li>
<li class="chapter" data-level="" data-path="exercises-3.html"><a href="exercises-3.html"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="simulation.html"><a href="simulation.html"><i class="fa fa-check"></i><b>6</b> Simulation</a><ul>
<li class="chapter" data-level="6.1" data-path="probability-and-random-variables.html"><a href="probability-and-random-variables.html"><i class="fa fa-check"></i><b>6.1</b> Probability and Random Variables</a></li>
<li class="chapter" data-level="6.2" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html"><i class="fa fa-check"></i><b>6.2</b> Monte Carlo Simulation</a><ul>
<li class="chapter" data-level="6.2.1" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#estimating-a-probability"><i class="fa fa-check"></i><b>6.2.1</b> Estimating a Probability</a></li>
<li class="chapter" data-level="6.2.2" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#estimating-an-expected-value"><i class="fa fa-check"></i><b>6.2.2</b> Estimating an Expected Value</a></li>
<li class="chapter" data-level="6.2.3" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#the-law-of-large-numbers"><i class="fa fa-check"></i><b>6.2.3</b> The Law of Large Numbers</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="triangle-chance.html"><a href="triangle-chance.html"><i class="fa fa-check"></i><b>6.3</b> Example: Chance of a Triangle</a><ul>
<li class="chapter" data-level="6.3.1" data-path="triangle-chance.html"><a href="triangle-chance.html#setting-a-seed"><i class="fa fa-check"></i><b>6.3.1</b> Setting a Seed</a></li>
<li class="chapter" data-level="6.3.2" data-path="triangle-chance.html"><a href="triangle-chance.html#program-development"><i class="fa fa-check"></i><b>6.3.2</b> Program Development</a></li>
<li class="chapter" data-level="6.3.3" data-path="triangle-chance.html"><a href="triangle-chance.html#number-of-repetitions"><i class="fa fa-check"></i><b>6.3.3</b> Number of Repetitions</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="simulation-connect.html"><a href="simulation-connect.html"><i class="fa fa-check"></i><b>6.4</b> Example: Will They Connect?</a><ul>
<li class="chapter" data-level="6.4.1" data-path="simulation-connect.html"><a href="simulation-connect.html#vectorization-vs.looping"><i class="fa fa-check"></i><b>6.4.1</b> Vectorization vs. Looping</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="appeals-court-paradox.html"><a href="appeals-court-paradox.html"><i class="fa fa-check"></i><b>6.5</b> Example: the Appeals Court Paradox</a></li>
<li class="chapter" data-level="6.6" data-path="simulation-number-needed.html"><a href="simulation-number-needed.html"><i class="fa fa-check"></i><b>6.6</b> Example: How Many Numbers Needed?</a></li>
<li class="chapter" data-level="6.7" data-path="example-dental-floss.html"><a href="example-dental-floss.html"><i class="fa fa-check"></i><b>6.7</b> Example: Dental Floss</a></li>
<li class="chapter" data-level="6.8" data-path="drunken-turtle-sim.html"><a href="drunken-turtle-sim.html"><i class="fa fa-check"></i><b>6.8</b> Example: The Drunken Turtle</a></li>
<li class="chapter" data-level="" data-path="glossary-4.html"><a href="glossary-4.html"><i class="fa fa-check"></i>Glossary</a></li>
<li class="chapter" data-level="" data-path="exercises-4.html"><a href="exercises-4.html"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="frames.html"><a href="frames.html"><i class="fa fa-check"></i><b>7</b> Data Frames</a><ul>
<li class="chapter" data-level="7.1" data-path="introduction-to-matrices.html"><a href="introduction-to-matrices.html"><i class="fa fa-check"></i><b>7.1</b> Introduction to Matrices</a></li>
<li class="chapter" data-level="7.2" data-path="matrix-indexing.html"><a href="matrix-indexing.html"><i class="fa fa-check"></i><b>7.2</b> Matrix Indexing</a><ul>
<li class="chapter" data-level="7.2.1" data-path="matrix-indexing.html"><a href="matrix-indexing.html#to-drop-or-not"><i class="fa fa-check"></i><b>7.2.1</b> To Drop or Not?</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="operations-on-matrices.html"><a href="operations-on-matrices.html"><i class="fa fa-check"></i><b>7.3</b> Operations on Matrices</a><ul>
<li class="chapter" data-level="7.3.1" data-path="operations-on-matrices.html"><a href="operations-on-matrices.html#arithmetical-operations"><i class="fa fa-check"></i><b>7.3.1</b> Arithmetical Operations</a></li>
<li class="chapter" data-level="7.3.2" data-path="operations-on-matrices.html"><a href="operations-on-matrices.html#matrix-multiplication"><i class="fa fa-check"></i><b>7.3.2</b> Matrix Multiplication</a></li>
<li class="chapter" data-level="7.3.3" data-path="operations-on-matrices.html"><a href="operations-on-matrices.html#logical-operations"><i class="fa fa-check"></i><b>7.3.3</b> Logical Operations</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="introduction-to-data-frames.html"><a href="introduction-to-data-frames.html"><i class="fa fa-check"></i><b>7.4</b> Introduction to Data Frames</a><ul>
<li class="chapter" data-level="7.4.1" data-path="introduction-to-data-frames.html"><a href="introduction-to-data-frames.html#viewing-a-data-frame"><i class="fa fa-check"></i><b>7.4.1</b> Viewing a Data Frame</a></li>
<li class="chapter" data-level="7.4.2" data-path="introduction-to-data-frames.html"><a href="introduction-to-data-frames.html#the-stucture-of-a-data-frame"><i class="fa fa-check"></i><b>7.4.2</b> The Stucture of a Data Frame</a></li>
<li class="chapter" data-level="7.4.3" data-path="introduction-to-data-frames.html"><a href="introduction-to-data-frames.html#factors"><i class="fa fa-check"></i><b>7.4.3</b> Factors</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="creating-data-frames.html"><a href="creating-data-frames.html"><i class="fa fa-check"></i><b>7.5</b> Creating Data Frames</a><ul>
<li class="chapter" data-level="7.5.1" data-path="creating-data-frames.html"><a href="creating-data-frames.html#creation-from-vectors"><i class="fa fa-check"></i><b>7.5.1</b> Creation from Vectors</a></li>
<li class="chapter" data-level="7.5.2" data-path="creating-data-frames.html"><a href="creating-data-frames.html#creation-from-other-frames"><i class="fa fa-check"></i><b>7.5.2</b> Creation From Other Frames</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html"><i class="fa fa-check"></i><b>7.6</b> Subsetting Data Frames</a><ul>
<li class="chapter" data-level="7.6.1" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#boolean-expressions"><i class="fa fa-check"></i><b>7.6.1</b> Boolean Expressions</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="ordering-data-frames.html"><a href="ordering-data-frames.html"><i class="fa fa-check"></i><b>7.7</b> Ordering Data Frames</a></li>
<li class="chapter" data-level="7.8" data-path="new-variables-from-old.html"><a href="new-variables-from-old.html"><i class="fa fa-check"></i><b>7.8</b> New Variables from Old</a><ul>
<li class="chapter" data-level="7.8.1" data-path="new-variables-from-old.html"><a href="new-variables-from-old.html#getting-rid-of-variables"><i class="fa fa-check"></i><b>7.8.1</b> Getting Rid of Variables</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="more-graphing.html"><a href="more-graphing.html"><i class="fa fa-check"></i><b>7.9</b> More Graphing</a><ul>
<li class="chapter" data-level="7.9.1" data-path="more-graphing.html"><a href="more-graphing.html#one-numerical-variable"><i class="fa fa-check"></i><b>7.9.1</b> One Numerical Variable</a></li>
<li class="chapter" data-level="7.9.2" data-path="more-graphing.html"><a href="more-graphing.html#categorical-variables"><i class="fa fa-check"></i><b>7.9.2</b> Categorical Variables</a></li>
<li class="chapter" data-level="7.9.3" data-path="more-graphing.html"><a href="more-graphing.html#onenum-onecat"><i class="fa fa-check"></i><b>7.9.3</b> One Numerical and One Categorical Variable</a></li>
<li class="chapter" data-level="7.9.4" data-path="more-graphing.html"><a href="more-graphing.html#two-numerical-variables"><i class="fa fa-check"></i><b>7.9.4</b> Two Numerical Variables</a></li>
<li class="chapter" data-level="7.9.5" data-path="more-graphing.html"><a href="more-graphing.html#grouping-by-a-categorical-variable"><i class="fa fa-check"></i><b>7.9.5</b> Grouping by a Categorical Variable</a></li>
<li class="chapter" data-level="7.9.6" data-path="more-graphing.html"><a href="more-graphing.html#application-u.s.-births"><i class="fa fa-check"></i><b>7.9.6</b> Application: U.S. Births</a></li>
<li class="chapter" data-level="7.9.7" data-path="more-graphing.html"><a href="more-graphing.html#learn-more"><i class="fa fa-check"></i><b>7.9.7</b> Learn More</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="glossary-5.html"><a href="glossary-5.html"><i class="fa fa-check"></i>Glossary</a></li>
<li class="chapter" data-level="" data-path="frames-exercises.html"><a href="frames-exercises.html"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="lists.html"><a href="lists.html"><i class="fa fa-check"></i><b>8</b> Lists</a><ul>
<li class="chapter" data-level="8.1" data-path="introduction-to-lists.html"><a href="introduction-to-lists.html"><i class="fa fa-check"></i><b>8.1</b> Introduction to Lists</a></li>
<li class="chapter" data-level="8.2" data-path="subsetting-and-accessing.html"><a href="subsetting-and-accessing.html"><i class="fa fa-check"></i><b>8.2</b> Subsetting and Accessing</a></li>
<li class="chapter" data-level="8.3" data-path="lists-splitting.html"><a href="lists-splitting.html"><i class="fa fa-check"></i><b>8.3</b> Splitting</a></li>
<li class="chapter" data-level="8.4" data-path="returning-multiple-values.html"><a href="returning-multiple-values.html"><i class="fa fa-check"></i><b>8.4</b> Returning Multiple Values</a></li>
<li class="chapter" data-level="8.5" data-path="iterating-over-a-list.html"><a href="iterating-over-a-list.html"><i class="fa fa-check"></i><b>8.5</b> Iterating Over a List</a></li>
<li class="chapter" data-level="8.6" data-path="a-note-on-ellipses.html"><a href="a-note-on-ellipses.html"><i class="fa fa-check"></i><b>8.6</b> A Note on Ellipses</a><ul>
<li class="chapter" data-level="8.6.1" data-path="a-note-on-ellipses.html"><a href="a-note-on-ellipses.html#use-1-passing-additional-arguments-to-functions-inside"><i class="fa fa-check"></i><b>8.6.1</b> Use #1: Passing Additional Arguments to Functions “Inside”</a></li>
<li class="chapter" data-level="8.6.2" data-path="a-note-on-ellipses.html"><a href="a-note-on-ellipses.html#use-2-permitting-any-number-of-arguments"><i class="fa fa-check"></i><b>8.6.2</b> Use #2: Permitting Any Number of Arguments</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="investigate-your-object-str-and-lists.html"><a href="investigate-your-object-str-and-lists.html"><i class="fa fa-check"></i><b>8.7</b> Investigate Your Object: <code>str()</code> and Lists</a></li>
<li class="chapter" data-level="" data-path="glossary-6.html"><a href="glossary-6.html"><i class="fa fa-check"></i>Glossary</a></li>
<li class="chapter" data-level="" data-path="exercises-5.html"><a href="exercises-5.html"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="strings.html"><a href="strings.html"><i class="fa fa-check"></i><b>9</b> Strings</a><ul>
<li class="chapter" data-level="9.1" data-path="character-vectors-strings.html"><a href="character-vectors-strings.html"><i class="fa fa-check"></i><b>9.1</b> Character Vectors: Strings</a></li>
<li class="chapter" data-level="9.2" data-path="characters-and-special-characters.html"><a href="characters-and-special-characters.html"><i class="fa fa-check"></i><b>9.2</b> Characters and Special Characters</a></li>
<li class="chapter" data-level="9.3" data-path="basic-string-operations.html"><a href="basic-string-operations.html"><i class="fa fa-check"></i><b>9.3</b> Basic String Operations</a><ul>
<li class="chapter" data-level="9.3.1" data-path="basic-string-operations.html"><a href="basic-string-operations.html#is-and-as"><i class="fa fa-check"></i><b>9.3.1</b> Is and As</a></li>
<li class="chapter" data-level="9.3.2" data-path="basic-string-operations.html"><a href="basic-string-operations.html#number-of-characters"><i class="fa fa-check"></i><b>9.3.2</b> Number of Characters</a></li>
<li class="chapter" data-level="9.3.3" data-path="basic-string-operations.html"><a href="basic-string-operations.html#substrings-and-trimming"><i class="fa fa-check"></i><b>9.3.3</b> Substrings and Trimming</a></li>
<li class="chapter" data-level="9.3.4" data-path="basic-string-operations.html"><a href="basic-string-operations.html#changing-cases"><i class="fa fa-check"></i><b>9.3.4</b> Changing Cases</a></li>
<li class="chapter" data-level="9.3.5" data-path="basic-string-operations.html"><a href="basic-string-operations.html#splitting-strings"><i class="fa fa-check"></i><b>9.3.5</b> Splitting Strings</a></li>
<li class="chapter" data-level="9.3.6" data-path="basic-string-operations.html"><a href="basic-string-operations.html#pasting-and-joining-strings"><i class="fa fa-check"></i><b>9.3.6</b> Pasting and Joining Strings</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="formatted-printing.html"><a href="formatted-printing.html"><i class="fa fa-check"></i><b>9.4</b> Formatted Printing</a></li>
<li class="chapter" data-level="" data-path="glossary-7.html"><a href="glossary-7.html"><i class="fa fa-check"></i>Glossary</a></li>
<li class="chapter" data-level="" data-path="exercises-6.html"><a href="exercises-6.html"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="regex.html"><a href="regex.html"><i class="fa fa-check"></i><b>10</b> Regular Expressions</a><ul>
<li class="chapter" data-level="10.1" data-path="motivation.html"><a href="motivation.html"><i class="fa fa-check"></i><b>10.1</b> Motivation</a></li>
<li class="chapter" data-level="10.2" data-path="regex-practice-sites.html"><a href="regex-practice-sites.html"><i class="fa fa-check"></i><b>10.2</b> Regex Practice Sites</a></li>
<li class="chapter" data-level="10.3" data-path="regex-syntax.html"><a href="regex-syntax.html"><i class="fa fa-check"></i><b>10.3</b> Regex Syntax</a><ul>
<li class="chapter" data-level="10.3.1" data-path="regex-syntax.html"><a href="regex-syntax.html#matching-a-specific-sequence"><i class="fa fa-check"></i><b>10.3.1</b> Matching a Specific Sequence</a></li>
<li class="chapter" data-level="10.3.2" data-path="regex-syntax.html"><a href="regex-syntax.html#character-classes"><i class="fa fa-check"></i><b>10.3.2</b> Character Classes</a></li>
<li class="chapter" data-level="10.3.3" data-path="regex-syntax.html"><a href="regex-syntax.html#quantification"><i class="fa fa-check"></i><b>10.3.3</b> Quantification</a></li>
<li class="chapter" data-level="10.3.4" data-path="regex-syntax.html"><a href="regex-syntax.html#greedy-vs.lazy"><i class="fa fa-check"></i><b>10.3.4</b> Greedy vs. Lazy</a></li>
<li class="chapter" data-level="10.3.5" data-path="regex-syntax.html"><a href="regex-syntax.html#grouping"><i class="fa fa-check"></i><b>10.3.5</b> Grouping</a></li>
<li class="chapter" data-level="10.3.6" data-path="regex-syntax.html"><a href="regex-syntax.html#alternation"><i class="fa fa-check"></i><b>10.3.6</b> Alternation</a></li>
<li class="chapter" data-level="10.3.7" data-path="regex-syntax.html"><a href="regex-syntax.html#anchors"><i class="fa fa-check"></i><b>10.3.7</b> Anchors</a></li>
<li class="chapter" data-level="10.3.8" data-path="regex-syntax.html"><a href="regex-syntax.html#regex-captures"><i class="fa fa-check"></i><b>10.3.8</b> Captures</a></li>
<li class="chapter" data-level="10.3.9" data-path="regex-syntax.html"><a href="regex-syntax.html#looking-around"><i class="fa fa-check"></i><b>10.3.9</b> Looking Around</a></li>
<li class="chapter" data-level="10.3.10" data-path="regex-syntax.html"><a href="regex-syntax.html#more-to-learn-1"><i class="fa fa-check"></i><b>10.3.10</b> More to Learn</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="entering-a-regex-in-r.html"><a href="entering-a-regex-in-r.html"><i class="fa fa-check"></i><b>10.4</b> Entering a Regex in R</a><ul>
<li class="chapter" data-level="10.4.1" data-path="entering-a-regex-in-r.html"><a href="entering-a-regex-in-r.html#string-to-regex"><i class="fa fa-check"></i><b>10.4.1</b> String to Regex</a></li>
<li class="chapter" data-level="10.4.2" data-path="entering-a-regex-in-r.html"><a href="entering-a-regex-in-r.html#regex-substitution"><i class="fa fa-check"></i><b>10.4.2</b> Substitution</a></li>
<li class="chapter" data-level="10.4.3" data-path="entering-a-regex-in-r.html"><a href="entering-a-regex-in-r.html#a-note-on-perl"><i class="fa fa-check"></i><b>10.4.3</b> A Note on Perl</a></li>
<li class="chapter" data-level="10.4.4" data-path="entering-a-regex-in-r.html"><a href="entering-a-regex-in-r.html#patterned-replacement"><i class="fa fa-check"></i><b>10.4.4</b> Patterned Replacement</a></li>
<li class="chapter" data-level="10.4.5" data-path="entering-a-regex-in-r.html"><a href="entering-a-regex-in-r.html#grepping"><i class="fa fa-check"></i><b>10.4.5</b> Grepping</a></li>
<li class="chapter" data-level="10.4.6" data-path="entering-a-regex-in-r.html"><a href="entering-a-regex-in-r.html#more-information-with-gregexpr"><i class="fa fa-check"></i><b>10.4.6</b> More Information with <code>gregexpr()</code></a></li>
<li class="chapter" data-level="10.4.7" data-path="entering-a-regex-in-r.html"><a href="entering-a-regex-in-r.html#regex-modes"><i class="fa fa-check"></i><b>10.4.7</b> Regex Modes</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="application-amazon-book-reviews.html"><a href="application-amazon-book-reviews.html"><i class="fa fa-check"></i><b>10.5</b> Application: Amazon Book Reviews</a></li>
<li class="chapter" data-level="" data-path="glossary-8.html"><a href="glossary-8.html"><i class="fa fa-check"></i>Glossary</a></li>
<li class="chapter" data-level="" data-path="exercises-7.html"><a href="exercises-7.html"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="files.html"><a href="files.html"><i class="fa fa-check"></i><b>11</b> Files</a><ul>
<li class="chapter" data-level="11.1" data-path="downloading-files.html"><a href="downloading-files.html"><i class="fa fa-check"></i><b>11.1</b> Downloading Files</a></li>
<li class="chapter" data-level="11.2" data-path="reading-text-files-with-readlines.html"><a href="reading-text-files-with-readlines.html"><i class="fa fa-check"></i><b>11.2</b> Reading Text Files with <code>readLines()</code></a></li>
<li class="chapter" data-level="11.3" data-path="reading-text-files-with-readr.html"><a href="reading-text-files-with-readr.html"><i class="fa fa-check"></i><b>11.3</b> Reading Text Files with <strong>readr</strong></a></li>
<li class="chapter" data-level="11.4" data-path="writing-to-files.html"><a href="writing-to-files.html"><i class="fa fa-check"></i><b>11.4</b> Writing to Files</a></li>
<li class="chapter" data-level="11.5" data-path="application-making-a-lexicon.html"><a href="application-making-a-lexicon.html"><i class="fa fa-check"></i><b>11.5</b> Application: Making a Lexicon</a></li>
<li class="chapter" data-level="" data-path="glossary-9.html"><a href="glossary-9.html"><i class="fa fa-check"></i>Glossary</a></li>
<li class="chapter" data-level="" data-path="exercises-8.html"><a href="exercises-8.html"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="functional.html"><a href="functional.html"><i class="fa fa-check"></i><b>12</b> Functional Programming in R</a><ul>
<li class="chapter" data-level="12.1" data-path="programming-paradigms.html"><a href="programming-paradigms.html"><i class="fa fa-check"></i><b>12.1</b> Programming Paradigms</a><ul>
<li class="chapter" data-level="12.1.1" data-path="programming-paradigms.html"><a href="programming-paradigms.html#procedural-programming"><i class="fa fa-check"></i><b>12.1.1</b> Procedural Programming</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="the-functional-programming-paradigm.html"><a href="the-functional-programming-paradigm.html"><i class="fa fa-check"></i><b>12.2</b> The Functional Programming Paradigm</a><ul>
<li class="chapter" data-level="12.2.1" data-path="the-functional-programming-paradigm.html"><a href="the-functional-programming-paradigm.html#the-ubiquity-of-functions-in-r"><i class="fa fa-check"></i><b>12.2.1</b> The Ubiquity of Functions in R</a></li>
<li class="chapter" data-level="12.2.2" data-path="the-functional-programming-paradigm.html"><a href="the-functional-programming-paradigm.html#functions-as-first-class-citizens"><i class="fa fa-check"></i><b>12.2.2</b> Functions as First-Class Citizens</a></li>
<li class="chapter" data-level="12.2.3" data-path="the-functional-programming-paradigm.html"><a href="the-functional-programming-paradigm.html#minimize-side-effects"><i class="fa fa-check"></i><b>12.2.3</b> Minimize Side Effects</a></li>
<li class="chapter" data-level="12.2.4" data-path="the-functional-programming-paradigm.html"><a href="the-functional-programming-paradigm.html#procedures-as-higher-order-function-calls"><i class="fa fa-check"></i><b>12.2.4</b> Procedures as Higher-Order Function Calls</a></li>
<li class="chapter" data-level="12.2.5" data-path="the-functional-programming-paradigm.html"><a href="the-functional-programming-paradigm.html#functional-programming-a-summary"><i class="fa fa-check"></i><b>12.2.5</b> Functional Programming: A Summary</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="lapply-and-friends.html"><a href="lapply-and-friends.html"><i class="fa fa-check"></i><b>12.3</b> <code>lapply()</code> and Friends</a><ul>
<li class="chapter" data-level="12.3.1" data-path="lapply-and-friends.html"><a href="lapply-and-friends.html#lapply"><i class="fa fa-check"></i><b>12.3.1</b> <code>lapply()</code></a></li>
<li class="chapter" data-level="12.3.2" data-path="lapply-and-friends.html"><a href="lapply-and-friends.html#sapply"><i class="fa fa-check"></i><b>12.3.2</b> <code>sapply()</code></a></li>
<li class="chapter" data-level="12.3.3" data-path="lapply-and-friends.html"><a href="lapply-and-friends.html#tapply"><i class="fa fa-check"></i><b>12.3.3</b> <code>tapply()</code></a></li>
<li class="chapter" data-level="12.3.4" data-path="lapply-and-friends.html"><a href="lapply-and-friends.html#map"><i class="fa fa-check"></i><b>12.3.4</b> <code>Map()</code></a></li>
<li class="chapter" data-level="12.3.5" data-path="lapply-and-friends.html"><a href="lapply-and-friends.html#replicate"><i class="fa fa-check"></i><b>12.3.5</b> <code>replicate()</code></a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="filter-and-reduce.html"><a href="filter-and-reduce.html"><i class="fa fa-check"></i><b>12.4</b> <code>Filter()</code> and <code>Reduce()</code></a></li>
<li class="chapter" data-level="12.5" data-path="functionals-vs-loops.html"><a href="functionals-vs-loops.html"><i class="fa fa-check"></i><b>12.5</b> Functionals vs. Loops</a></li>
<li class="chapter" data-level="12.6" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>12.6</b> Conclusion</a></li>
<li class="chapter" data-level="" data-path="glossary-10.html"><a href="glossary-10.html"><i class="fa fa-check"></i>Glossary</a></li>
<li class="chapter" data-level="" data-path="exercises-9.html"><a href="exercises-9.html"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="oo.html"><a href="oo.html"><i class="fa fa-check"></i><b>13</b> Object-Oriented Programming in R</a><ul>
<li class="chapter" data-level="13.1" data-path="the-object-oriented-programming-paradigm.html"><a href="the-object-oriented-programming-paradigm.html"><i class="fa fa-check"></i><b>13.1</b> The Object-Oriented Programming Paradigm</a></li>
<li class="chapter" data-level="13.2" data-path="reference-classes-with-package-r6.html"><a href="reference-classes-with-package-r6.html"><i class="fa fa-check"></i><b>13.2</b> Reference Classes with Package R6</a><ul>
<li class="chapter" data-level="13.2.1" data-path="reference-classes-with-package-r6.html"><a href="reference-classes-with-package-r6.html#defining-a-class"><i class="fa fa-check"></i><b>13.2.1</b> Defining a Class</a></li>
<li class="chapter" data-level="13.2.2" data-path="reference-classes-with-package-r6.html"><a href="reference-classes-with-package-r6.html#instantiation-initializing-objects"><i class="fa fa-check"></i><b>13.2.2</b> Instantiation: Initializing Objects</a></li>
<li class="chapter" data-level="13.2.3" data-path="reference-classes-with-package-r6.html"><a href="reference-classes-with-package-r6.html#getting-and-setting-attributes"><i class="fa fa-check"></i><b>13.2.3</b> Getting and Setting Attributes</a></li>
<li class="chapter" data-level="13.2.4" data-path="reference-classes-with-package-r6.html"><a href="reference-classes-with-package-r6.html#calling-methods"><i class="fa fa-check"></i><b>13.2.4</b> Calling Methods</a></li>
<li class="chapter" data-level="13.2.5" data-path="reference-classes-with-package-r6.html"><a href="reference-classes-with-package-r6.html#holding-a-reference-not-a-value"><i class="fa fa-check"></i><b>13.2.5</b> Holding a Reference, not a Value</a></li>
<li class="chapter" data-level="13.2.6" data-path="reference-classes-with-package-r6.html"><a href="reference-classes-with-package-r6.html#cloning-an-object"><i class="fa fa-check"></i><b>13.2.6</b> Cloning an Object</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="inheritance.html"><a href="inheritance.html"><i class="fa fa-check"></i><b>13.3</b> Inheritance</a></li>
<li class="chapter" data-level="13.4" data-path="adding-members-to-a-class.html"><a href="adding-members-to-a-class.html"><i class="fa fa-check"></i><b>13.4</b> Adding Members to a Class</a></li>
<li class="chapter" data-level="13.5" data-path="method-chaining.html"><a href="method-chaining.html"><i class="fa fa-check"></i><b>13.5</b> Method Chaining</a></li>
<li class="chapter" data-level="13.6" data-path="application-whales-in-an-ocean.html"><a href="application-whales-in-an-ocean.html"><i class="fa fa-check"></i><b>13.6</b> Application: Whales in an Ocean</a></li>
<li class="chapter" data-level="13.7" data-path="generic-function-oo.html"><a href="generic-function-oo.html"><i class="fa fa-check"></i><b>13.7</b> Generic-Function OO</a><ul>
<li class="chapter" data-level="13.7.1" data-path="generic-function-oo.html"><a href="generic-function-oo.html#motivating-examples"><i class="fa fa-check"></i><b>13.7.1</b> Motivating Examples</a></li>
<li class="chapter" data-level="13.7.2" data-path="generic-function-oo.html"><a href="generic-function-oo.html#terminology"><i class="fa fa-check"></i><b>13.7.2</b> Terminology</a></li>
<li class="chapter" data-level="13.7.3" data-path="generic-function-oo.html"><a href="generic-function-oo.html#common-generic-functions"><i class="fa fa-check"></i><b>13.7.3</b> Common Generic Functions</a></li>
<li class="chapter" data-level="13.7.4" data-path="generic-function-oo.html"><a href="generic-function-oo.html#writing-your-own-methods"><i class="fa fa-check"></i><b>13.7.4</b> Writing Your Own Methods</a></li>
<li class="chapter" data-level="13.7.5" data-path="generic-function-oo.html"><a href="generic-function-oo.html#writing-a-generic-function"><i class="fa fa-check"></i><b>13.7.5</b> Writing a Generic Function</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="glossary-11.html"><a href="glossary-11.html"><i class="fa fa-check"></i>Glossary</a></li>
<li class="chapter" data-level="" data-path="exercises-10.html"><a href="exercises-10.html"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Beginning Computer Science with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="application-whales-in-an-ocean" class="section level2">
<h2><span class="header-section-number">13.6</span> Application: Whales in an Ocean</h2>
<p>Let’s now write a more elaborate program in the object-oriented style. Our program will simulate the population growth for whales in a ocean. In our model:</p>
<ul>
<li>Whales are mostly solitary: they move randomly about the ocean, happily feeding upon plankton.</li>
<li>When a male and female whale are sufficiently close together the female whale will check out the male to see if he is mature enough to mate. If she herself is fertile, then she will mate with him and a child will be produced.</li>
<li>That child will be either male or female, with equal likelihood for either option.</li>
<li>After mating, the female will be infertile for a period of time.</li>
<li>Whales have a set maximum lifetime.</li>
<li>in any given time period, it is possible for a whale to starve, causing it to die before reaches its lifespan. The probability of starvation is low when the whale population is small (presumably there is plenty of plankton available then) but the starvation-probability increases in direct proportion to the population.</li>
</ul>
<p>From the above conditions you can see that if the whale population is small then there is low probability of starvation, but on the other hand whales are liable to be spread thinly throughout the ocean. As a result males and females are relatively unlikely to run across each other, and hence births are less likely to occur. With a low enough population there is a strong possibility that the whales will die off before they can reproduce. (This is why biologists worry about some whale populations: if the whales are hunted to the point where the population is below a certain critical threshold, then they can go extinct on their own, even if hunting ceases.) On the other hand, if the whale population grows large then males and female meet frequently, and there are plenty of births. On the other hand there is a general shortage of food, resulting in high starvation rates. At some point birth and starvation balance each other out, resulting in a long-term equilibrium population-level.</p>
<p>We will implement our simulation with various objects:</p>
<ul>
<li>an ocean</li>
<li>whales of two types:
<ul>
<li>male whales</li>
<li>female whales</li>
</ul></li>
</ul>
<p>We will begin by defining the class Whale:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Whale &lt;-<span class="st"> </span><span class="kw">R6Class</span>(<span class="st">&quot;Whale&quot;</span>,
                 <span class="dt">public =</span> <span class="kw">list</span>(
                   <span class="dt">position =</span> <span class="ot">NULL</span>,
                   <span class="dt">age =</span> <span class="ot">NULL</span>,
                   <span class="dt">lifespan =</span> <span class="ot">NULL</span>,
                   <span class="dt">range =</span> <span class="ot">NULL</span>,
                   <span class="dt">maturity =</span> <span class="ot">NULL</span>,
                   <span class="dt">stepSize =</span> <span class="ot">NULL</span>,
                   <span class="dt">initialize =</span> <span class="cf">function</span>(<span class="dt">position =</span> <span class="ot">NA</span>, <span class="dt">age =</span> <span class="dv">3</span>,
                                         <span class="dt">lifespan =</span> <span class="dv">40</span>, <span class="dt">range =</span> <span class="dv">5</span>,
                                         <span class="dt">maturity =</span> <span class="dv">10</span>, <span class="dt">stepSize =</span> <span class="dv">5</span>) {
                     self<span class="op">$</span>position &lt;-<span class="st"> </span>position
                     self<span class="op">$</span>age &lt;-<span class="st"> </span>age
                     self<span class="op">$</span>lifespan &lt;-<span class="st"> </span>lifespan
                     self<span class="op">$</span>range &lt;-<span class="st"> </span>range
                     self<span class="op">$</span>maturity &lt;-<span class="st"> </span>maturity
                     self<span class="op">$</span>stepSize &lt;-<span class="st"> </span>stepSize
                   }
                 ))</code></pre></div>
<p>For whales that are instances of the Whale class:</p>
<ul>
<li><code>position</code> will contain the current x and y-coordinate of the whale in a two-dimensional ocean;</li>
<li><code>age</code> will give the current age of the whale.</li>
<li><code>lifespan</code> is the maximum age that the whale can attain before it dies.</li>
<li><code>range</code> is how close the whale has to be to another whale of the opposite sex in order to detect the presence of that whale.</li>
<li><code>maturity</code> is the age that the whale must attain in order to be eligible to mate.</li>
<li><code>stepSize</code> is the distance that the whale moves in the ocean in a single time-period.</li>
</ul>
<p>Whales need to be able to move about in the sea. A whale moves by picking a random direction—any angle between 0 and <span class="math inline">\(2\pi\)</span> radians—and then moving <code>stepSize</code> units in that direction. If the selected motion would take the whale outside the boundaries of the ocean, then R will repeat the motion until the whale lands properly within the boundaries.</p>
<p>The motion of a whale is implemented in the code below for a <code>move()</code> method that is added to class Whale:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Whale<span class="op">$</span><span class="kw">set</span>(<span class="st">&quot;public&quot;</span>,
          <span class="st">&quot;move&quot;</span>,
          <span class="cf">function</span>(dims, <span class="dt">r =</span> self<span class="op">$</span>stepSize) {
            xMax &lt;-<span class="st"> </span>dims[<span class="dv">1</span>]
            yMax &lt;-<span class="st"> </span>dims[<span class="dv">2</span>]
            <span class="cf">repeat</span> {
              theta &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">1</span>, <span class="dt">min =</span> <span class="dv">0</span>, <span class="dt">max =</span> <span class="dv">2</span><span class="op">*</span>pi)
              p &lt;-<span class="st"> </span>self<span class="op">$</span>position <span class="op">+</span><span class="st"> </span>r <span class="op">*</span><span class="st"> </span><span class="kw">c</span>(<span class="kw">cos</span>(theta), <span class="kw">sin</span>(theta))
              within &lt;-<span class="st"> </span>(p[<span class="dv">1</span>] <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span>p[<span class="dv">1</span>] <span class="op">&lt;</span><span class="st"> </span>xMax) <span class="op">&amp;&amp;</span><span class="st"> </span>(p[<span class="dv">2</span>] <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span>p[<span class="dv">2</span>] <span class="op">&lt;</span><span class="st"> </span>yMax)
              <span class="cf">if</span> ( within ) {
                self<span class="op">$</span>position &lt;-<span class="st"> </span>p
                <span class="cf">break</span>
              }
            }
          }, <span class="dt">overwrite =</span> T)</code></pre></div>
<p>Note the parameter <code>dims</code> for the move function. From the code we can tell that it’s a vector of length 2. In fact the parameter will contain the x and and y-dimensions (the width and breadth) of our ocean. It’s something that will have to be determined by the ocean itself. We haven’t written the class Ocean yet, so this part of the code will have to remain a bit mysterious, for now.</p>
<p>We need male and female whales, so we create a class for each sex. Both classes inherit from Whale. The class Male adds only a <code>sex</code> attribute:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Male &lt;-<span class="st"> </span><span class="kw">R6Class</span>(<span class="st">&quot;Male&quot;</span>,
                <span class="dt">inherit =</span> Whale,
                <span class="dt">public =</span> <span class="kw">list</span>(
                  <span class="dt">sex =</span> <span class="st">&quot;male&quot;</span>
                ))</code></pre></div>
<p>A female whale is a bit more complex: in addition to a sex attribute, she needs an attribute that specifies how long she will be infertile after giving birth, and another attribute that enables the program to keep track of the number of time-periods she must wait until she is fertile again:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Female &lt;-<span class="st"> </span><span class="kw">R6Class</span>(<span class="st">&quot;Female&quot;</span>,
                <span class="dt">inherit =</span> Whale,
                <span class="dt">public =</span> <span class="kw">list</span>(
                  <span class="dt">sex =</span> <span class="st">&quot;female&quot;</span>,
                  <span class="dt">timeToFertility =</span> <span class="dv">0</span>,
                  <span class="dt">infertilityPeriod =</span> <span class="dv">5</span>
                ))</code></pre></div>
<p>A female whale also needs a method to determine whether a mature whale is in the vicinity:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Female<span class="op">$</span><span class="kw">set</span>(<span class="st">&quot;public&quot;</span>,
           <span class="st">&quot;maleNear&quot;</span>,
           <span class="cf">function</span>(males, dist) {
             foundOne &lt;-<span class="st"> </span><span class="ot">FALSE</span>
             <span class="cf">for</span> ( male <span class="cf">in</span> males ) {
               near &lt;-<span class="st"> </span><span class="kw">dist</span>(male<span class="op">$</span>position, self<span class="op">$</span>position) <span class="op">&lt;</span><span class="st"> </span>self<span class="op">$</span>range
               mature &lt;-<span class="st"> </span>(male<span class="op">$</span>age <span class="op">&gt;=</span><span class="st"> </span>male<span class="op">$</span>maturity)
               <span class="cf">if</span> ( near <span class="op">&amp;&amp;</span><span class="st"> </span>mature ) {
                 foundOne &lt;-<span class="st"> </span><span class="ot">TRUE</span>
                 <span class="cf">break</span>
               }
             }
             foundOne
           }, <span class="dt">overwrite =</span> T)</code></pre></div>
<p>Again, note the parameters <code>males</code> and <code>dist</code>. Values for these parameters will be provided by the ocean object. <code>males</code> will be a list of the male whales in the population at the current time, and <code>dist</code> will be a function for computing the distance between any two points in the ocean.</p>
<p>A female whale also needs to be able to mate:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Female<span class="op">$</span><span class="kw">set</span>(<span class="st">&quot;public&quot;</span>,
           <span class="st">&quot;mate&quot;</span>,
           <span class="cf">function</span>() {
             babySex &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="kw">c</span>(<span class="st">&quot;female&quot;</span>, <span class="st">&quot;male&quot;</span>), <span class="dt">size =</span> <span class="dv">1</span>)
             self<span class="op">$</span>timeToFertility &lt;-<span class="st"> </span>self<span class="op">$</span>infertilityPeriod
             <span class="kw">return</span>(babySex)
           }, <span class="dt">overwrite =</span> T)</code></pre></div>
<p>Now it is time to define the Ocean class. It’s a bit of a mouthful:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Ocean &lt;-<span class="st"> </span><span class="kw">R6Class</span>(<span class="st">&quot;Ocean&quot;</span>,
                 <span class="dt">public =</span> <span class="kw">list</span>(
                   <span class="dt">dimensions =</span> <span class="ot">NULL</span>,
                   <span class="dt">males =</span> <span class="ot">NULL</span>,
                   <span class="dt">females =</span> <span class="ot">NULL</span>,
                   <span class="dt">malePop =</span> <span class="ot">NULL</span>,
                   <span class="dt">femalePop =</span> <span class="ot">NULL</span>,
                   <span class="dt">starveParameter =</span> <span class="ot">NULL</span>,
                   <span class="dt">distance =</span> <span class="cf">function</span>(a, b) {
                     <span class="kw">sqrt</span>((a[<span class="dv">1</span>] <span class="op">-</span><span class="st"> </span>b[<span class="dv">1</span>])<span class="op">^</span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>(a[<span class="dv">2</span>] <span class="op">-</span><span class="st"> </span>b[<span class="dv">2</span>])<span class="op">^</span><span class="dv">2</span>)
                   },
                   <span class="dt">initialize =</span> <span class="cf">function</span>(<span class="dt">dims =</span> <span class="kw">c</span>(<span class="dv">100</span>, <span class="dv">100</span>),
                                         <span class="dt">males =</span> <span class="dv">10</span>,
                                         <span class="dt">females =</span> <span class="dv">10</span>,
                                         <span class="dt">starve =</span> <span class="dv">5</span>) {
                     self<span class="op">$</span>dimensions &lt;-<span class="st"> </span>dims
                     xMax &lt;-<span class="st"> </span>dims[<span class="dv">1</span>]
                     yMax &lt;-<span class="st"> </span>dims[<span class="dv">2</span>]
                     maleWhales &lt;-<span class="st"> </span><span class="kw">replicate</span>(
                       males, 
                       Male<span class="op">$</span><span class="kw">new</span>(<span class="dt">age =</span> <span class="dv">10</span>, 
                                <span class="dt">position =</span> <span class="kw">c</span>(<span class="kw">runif</span>(<span class="dv">1</span>, <span class="dv">0</span>, xMax),
                                            <span class="kw">runif</span>(<span class="dv">1</span>, <span class="dv">0</span>, yMax))))
                     femaleWhales &lt;-<span class="st"> </span><span class="kw">replicate</span>(
                       females, 
                       Female<span class="op">$</span><span class="kw">new</span>(<span class="dt">age =</span> <span class="dv">10</span>, 
                                  <span class="dt">position =</span> <span class="kw">c</span>(<span class="kw">runif</span>(<span class="dv">1</span>, <span class="dv">0</span>, xMax), 
                                               <span class="kw">runif</span>(<span class="dv">1</span>, <span class="dv">0</span>, yMax))))
                     self<span class="op">$</span>males &lt;-<span class="st"> </span>maleWhales
                     self<span class="op">$</span>females &lt;-<span class="st"> </span>femaleWhales
                     self<span class="op">$</span>malePop &lt;-<span class="st"> </span>males
                     self<span class="op">$</span>femalePop &lt;-<span class="st"> </span>females
                     self<span class="op">$</span>starveParameter &lt;-<span class="st"> </span>starve
                   },
                   <span class="dt">starvationProbability =</span> <span class="cf">function</span>(popDensity) {
                     self<span class="op">$</span>starveParameter <span class="op">*</span><span class="st"> </span>popDensity
                   }
                 ))</code></pre></div>
<p>In an instantiation of the class Ocean:</p>
<ul>
<li><code>dimensions</code> will be numerical vector of length 2 that specifies the width and breadth of the ocean.</li>
<li><code>males</code> and <code>females</code> will be lists that contain respectively the current sets of male whales and female whales. Note that this implies that an ocean will contain as members other items that are themselves R6 classes. This is an example of what is called <em>composition</em> in object-oriented programming.</li>
<li><code>malePop</code> and <code>femalePop</code> give respectively the current counts male and females whales.</li>
<li><code>starveParameter</code> helps determine the probability that each individual whale will starve within the next time-period. Note that the method <code>starvationProbability()</code> makes the probability of starvation equal product of <code>starveParameter</code> and the current density of the population of whales in the ocean. The bigger this attribute is, the more starvation will occur and the lower the long-term upper limit of the population will be.</li>
<li><code>distance()</code> is the method for finding the distance between any two positions in the ocean. It implements the standard distance-formula from high-school geometry.</li>
<li>The initialization function permits the user to determine the dimensions of the ocean, the initial number of male and female whales, and the starvation parameter. In the instantiation process for an individual ocean the required number of male and female whales are instantiated and are placed randomly in the ocean.</li>
</ul>
<p>We need to add a method that allows an ocean to advance one unit of time. During that time:</p>
<ul>
<li>Each mature and fertile female whale must check for nearby mature males, mate with one if possible, and produce a baby.</li>
<li>Any offspring produced must then be added to the ocean’s lists of male and female whales.</li>
<li>The ocean must then subject each whale to the possibility of starvation within the time-period at hand.</li>
<li>All whales that survive must then move.</li>
<li>The age of each whale must be increased by one time-unit. For females, the time remaining until fertility must also be decreased by a unit.</li>
</ul>
<p>The <code>advance()</code> method is implemented and added to Ocean with the code below:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Ocean<span class="op">$</span><span class="kw">set</span>(<span class="st">&quot;public&quot;</span>,
          <span class="st">&quot;advance&quot;</span>,
          <span class="cf">function</span>() {
            malePop &lt;-<span class="st"> </span>self<span class="op">$</span>malePop
            femalePop &lt;-<span class="st"> </span>self<span class="op">$</span>femalePop
            population &lt;-<span class="st"> </span>malePop <span class="op">+</span><span class="st"> </span>femalePop
            <span class="cf">if</span> ( population <span class="op">==</span><span class="st"> </span><span class="dv">0</span> ) {
              <span class="kw">return</span>(<span class="ot">NULL</span>)
            }
            males &lt;-<span class="st"> </span>self<span class="op">$</span>males
            females &lt;-<span class="st"> </span>self<span class="op">$</span>females
            babyMales &lt;-<span class="st"> </span><span class="kw">list</span>()
            babyFemales &lt;-<span class="st"> </span><span class="kw">list</span>()
            <span class="cf">if</span> ( malePop <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span>femalePop <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span> ) {
              <span class="cf">for</span> ( female <span class="cf">in</span> females ) {
                <span class="cf">if</span> ( female<span class="op">$</span>age <span class="op">&gt;=</span><span class="st"> </span>female<span class="op">$</span>maturity <span class="op">&amp;&amp;</span><span class="st"> </span>
<span class="st">                     </span>female<span class="op">$</span>timeToFertility <span class="op">&lt;=</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span>
<span class="st">                     </span>female<span class="op">$</span><span class="kw">maleNear</span>(<span class="dt">males =</span> males,
                                     <span class="dt">dist =</span> self<span class="op">$</span>distance)) {
                  outcome &lt;-<span class="st"> </span>female<span class="op">$</span><span class="kw">mate</span>()
                  <span class="cf">if</span> ( outcome <span class="op">==</span><span class="st"> &quot;male&quot;</span> ) {
                    baby &lt;-<span class="st"> </span>Male<span class="op">$</span><span class="kw">new</span>(<span class="dt">age =</span> <span class="dv">0</span>, <span class="dt">position =</span> female<span class="op">$</span>position)
                    babyMales &lt;-<span class="st"> </span><span class="kw">c</span>(babyMales, baby)
                  } <span class="cf">else</span> {
                    baby &lt;-<span class="st"> </span>Female<span class="op">$</span><span class="kw">new</span>(<span class="dt">age =</span> <span class="dv">0</span>, <span class="dt">position =</span> female<span class="op">$</span>position)
                    babyFemales &lt;-<span class="st"> </span><span class="kw">c</span>(babyFemales, baby)
                  }
                }
              }
            }
            
            <span class="co"># augment the male and female lists if needed:</span>
            lmb &lt;-<span class="st"> </span><span class="kw">length</span>(babyMales); lfb &lt;-<span class="st"> </span><span class="kw">length</span>(babyFemales);
            
            <span class="co"># throw in the babies:</span>
            <span class="cf">if</span> ( lmb <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span> ) {
              males &lt;-<span class="st"> </span><span class="kw">c</span>(males, babyMales)
            }
            <span class="cf">if</span> ( lfb <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span> ) {
              females &lt;-<span class="st"> </span><span class="kw">c</span>(females, babyFemales)
            }
            
            <span class="co"># revise population for new births:</span>
            population &lt;-<span class="st"> </span><span class="kw">length</span>(males) <span class="op">+</span><span class="st"> </span><span class="kw">length</span>(females)
            
            <span class="co"># starve some of them, maybe:</span>
            popDen &lt;-<span class="st"> </span>population<span class="op">/</span><span class="kw">prod</span>(self<span class="op">$</span>dimensions)
            starveProb &lt;-<span class="st"> </span>self<span class="op">$</span><span class="kw">starvationProbability</span>(<span class="dt">popDensity =</span> popDen)
            maleDead &lt;-<span class="st"> </span><span class="kw">logical</span>(<span class="kw">length</span>(males))
            femaleDead &lt;-<span class="st"> </span><span class="kw">logical</span>(<span class="kw">length</span>(females))
            <span class="co"># starve some males</span>
            <span class="cf">for</span> ( i <span class="cf">in</span> <span class="kw">seq_along</span>(maleDead) ) {
              male &lt;-<span class="st"> </span>males[[i]]
              maleDead[i] &lt;-<span class="st"> </span>(<span class="kw">runif</span>(<span class="dv">1</span>) <span class="op">&lt;=</span><span class="st"> </span>starveProb)
              male<span class="op">$</span>age &lt;-<span class="st"> </span>male<span class="op">$</span>age <span class="op">+</span><span class="st"> </span><span class="dv">1</span>
              <span class="cf">if</span> ( male<span class="op">$</span>age <span class="op">&gt;=</span><span class="st"> </span>male<span class="op">$</span>lifespan ) maleDead[i] &lt;-<span class="st"> </span><span class="ot">TRUE</span>
              <span class="cf">if</span> ( maleDead[i] ) <span class="cf">next</span>
              <span class="co"># if whale is not dead, he should move:</span>
              male<span class="op">$</span><span class="kw">move</span>(<span class="dt">dims =</span> self<span class="op">$</span>dimensions)
            }
            <span class="co"># starve some females</span>
            <span class="cf">for</span> ( i <span class="cf">in</span> <span class="kw">seq_along</span>(femaleDead) ) {
              female &lt;-<span class="st"> </span>females[[i]]
              femaleDead[i] &lt;-<span class="st"> </span>(<span class="kw">runif</span>(<span class="dv">1</span>) <span class="op">&lt;=</span><span class="st"> </span>starveProb)
              female<span class="op">$</span>age &lt;-<span class="st"> </span>female<span class="op">$</span>age <span class="op">+</span><span class="st"> </span><span class="dv">1</span>
              <span class="cf">if</span> ( female<span class="op">$</span>age <span class="op">&gt;=</span><span class="st"> </span>female<span class="op">$</span>lifespan ) femaleDead[i] &lt;-<span class="st"> </span><span class="ot">TRUE</span>
              <span class="cf">if</span> ( femaleDead[i] ) <span class="cf">next</span>
              <span class="cf">if</span> ( female<span class="op">$</span>sex <span class="op">==</span><span class="st"> &quot;female&quot;</span> ) {
                female<span class="op">$</span>timeToFertility &lt;-<span class="st"> </span>female<span class="op">$</span>timeToFertility <span class="op">-</span><span class="st"> </span><span class="dv">1</span>
              }
              <span class="co"># if female is not dead, she should move:</span>
              female<span class="op">$</span><span class="kw">move</span>(<span class="dt">dims =</span> self<span class="op">$</span>dimensions)
            }
            
            <span class="co"># revise male and female whale lists:</span>
            malePop &lt;-<span class="st"> </span><span class="kw">sum</span>(<span class="op">!</span>maleDead)
            self<span class="op">$</span>malePop &lt;-<span class="st"> </span>malePop
            femalePop &lt;-<span class="st"> </span><span class="kw">sum</span>(<span class="op">!</span>femaleDead)
            self<span class="op">$</span>femalePop &lt;-<span class="st"> </span>femalePop
            <span class="cf">if</span> ( malePop <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span> ) {
              self<span class="op">$</span>males &lt;-<span class="st"> </span>males[<span class="op">!</span>maleDead]
            } <span class="cf">else</span> {
              self<span class="op">$</span>males &lt;-<span class="st"> </span><span class="kw">list</span>()
            }
            <span class="cf">if</span> ( femalePop <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span> ) {
              self<span class="op">$</span>females &lt;-<span class="st"> </span>females[<span class="op">!</span>femaleDead]
            } <span class="cf">else</span> {
              self<span class="op">$</span>females &lt;-<span class="st"> </span><span class="kw">list</span>()
            }
          }, <span class="dt">overwrite =</span> T)</code></pre></div>
<p>In simulations we might enjoy looking at a picture of the ocean at any given time moment. Hence we add a <code>plot()</code> method that enables an ocean to produce a graph of the whales within it. In this graph males will be colored red and females green. Mature whales will appear as larger than immature whales. For purposes of speed we use R’s base graphics system rather than <strong>ggplot2</strong>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Ocean<span class="op">$</span><span class="kw">set</span>(<span class="st">&quot;public&quot;</span>, 
          <span class="st">&quot;plot&quot;</span>,
          <span class="cf">function</span>() {
            males &lt;-<span class="st"> </span>self<span class="op">$</span>males[<span class="dv">1</span><span class="op">:</span>self<span class="op">$</span>malePop]
            females &lt;-<span class="st"> </span>self<span class="op">$</span>females[<span class="dv">1</span><span class="op">:</span>self<span class="op">$</span>femalePop]
            whales &lt;-<span class="st"> </span><span class="kw">c</span>(males, females)
            <span class="cf">if</span> ( <span class="kw">length</span>(whales) <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) {
              <span class="kw">plot</span>(<span class="dv">0</span>,<span class="dv">0</span>, <span class="dt">type =</span> <span class="st">&quot;n&quot;</span>, <span class="dt">main =</span> <span class="st">&quot;All Gone!&quot;</span>)
              <span class="kw">box</span>(<span class="dt">lwd =</span> <span class="dv">2</span>)
              <span class="kw">return</span>(<span class="ot">NULL</span>)
            }
            mat &lt;-<span class="st"> </span><span class="kw">sapply</span>(whales, <span class="cf">function</span>(x) {
              <span class="kw">c</span>(x<span class="op">$</span>position[<span class="dv">1</span>], x<span class="op">$</span>position[<span class="dv">2</span>],
                <span class="kw">as.numeric</span>(x<span class="op">$</span>sex <span class="op">==</span><span class="st"> &quot;male&quot;</span>), <span class="kw">as.numeric</span>(x<span class="op">$</span>age <span class="op">&gt;=</span><span class="st"> </span>x<span class="op">$</span>maturity))
              }, <span class="dt">simplify =</span> <span class="st">&quot;array&quot;</span>)
            mat &lt;-<span class="st"> </span><span class="kw">simplify2array</span>(<span class="kw">t</span>(mat))
            df &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(mat)
            <span class="kw">names</span>(df) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>, <span class="st">&quot;sex&quot;</span>, <span class="st">&quot;mature&quot;</span>)
            <span class="co"># males will be red, females green:</span>
            df<span class="op">$</span>color &lt;-<span class="st"> </span><span class="kw">ifelse</span>(df<span class="op">$</span>sex <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;red&quot;</span>, <span class="st">&quot;green&quot;</span>)
            <span class="co"># mature whales have cex = 3, immature whales cex 0.7</span>
            df<span class="op">$</span>size &lt;-<span class="st"> </span><span class="kw">ifelse</span>(df<span class="op">$</span>mature <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="fl">1.3</span>, <span class="fl">0.7</span>)
            <span class="kw">with</span>(df, 
                 <span class="kw">plot</span>(x, y, <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="dv">0</span>, self<span class="op">$</span>dimensions[<span class="dv">1</span>]),
                 <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">0</span>, self<span class="op">$</span>dimensions[<span class="dv">1</span>]), <span class="dt">pch =</span> <span class="dv">19</span>, <span class="dt">xlab =</span> <span class="st">&quot;&quot;</span>,
                 <span class="dt">ylab =</span> <span class="st">&quot;&quot;</span>, <span class="dt">axes =</span> <span class="ot">FALSE</span>, <span class="dt">col =</span> color, <span class="dt">cex =</span> size,
                 <span class="dt">main =</span> <span class="kw">paste0</span>(<span class="st">&quot;Population = &quot;</span>, <span class="kw">nrow</span>(df))))
            <span class="kw">box</span>(<span class="dt">lwd =</span> <span class="dv">2</span>)
          }, <span class="dt">overwrite =</span> T)</code></pre></div>
<p>Finally, we write a simulation function. The function allows the user to specify the number of time-units that the simulation will cover, along with initial numbers of male and female whales. The user will have an option to “animate” the simulation showing a plot of the ocean after each time-unit. If the animation option is chosen, then R will use the <code>Sys.sleep()</code> function  to make the computer suspend computations for half a second so that the user can view the plot. The simulation will cease if all of the whales die prior to end of the allotted time. Finally, the function uses <strong>ggplot2</strong> to produce a graph of the whale population as a function of time.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)
oceanSim &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">steps =</span> <span class="dv">100</span>, <span class="dt">males =</span> <span class="dv">10</span>, <span class="dt">females =</span> <span class="dv">10</span>,
                     <span class="dt">starve =</span> <span class="dv">5</span>, <span class="dt">animate =</span> <span class="ot">TRUE</span>, <span class="dt">seed =</span> <span class="ot">NULL</span>) {
  <span class="cf">if</span> ( <span class="kw">is.null</span>(seed) ) {
    seed &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(<span class="kw">Sys.time</span>())
  }
  <span class="kw">set.seed</span>(seed)
  ocean &lt;-<span class="st"> </span>Ocean<span class="op">$</span><span class="kw">new</span>(<span class="dt">dims =</span> <span class="kw">c</span>(<span class="dv">100</span>, <span class="dv">100</span>), <span class="dt">males =</span> males, 
                     <span class="dt">females =</span> females, <span class="dt">starve =</span> starve)
  population &lt;-<span class="kw">numeric</span>(steps)
  <span class="cf">for</span> ( i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>steps ) {
    population[i] &lt;-<span class="st"> </span>ocean<span class="op">$</span>malePop <span class="op">+</span><span class="st"> </span>ocean<span class="op">$</span>femalePop
    <span class="cf">if</span> ( animate ) ocean<span class="op">$</span><span class="kw">plot</span>()
    <span class="cf">if</span> ( population[i] <span class="op">==</span><span class="st"> </span><span class="dv">0</span> ) <span class="cf">break</span>
    ocean<span class="op">$</span><span class="kw">advance</span>()
    <span class="cf">if</span> ( animate ) <span class="kw">Sys.sleep</span>(<span class="fl">0.5</span>)
  }
  pop &lt;-<span class="st"> </span>population[<span class="dv">1</span><span class="op">:</span>i]
  df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">time =</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(pop),
                   pop)
  <span class="kw">ggplot</span>(df, <span class="kw">aes</span>(<span class="dt">x =</span> time, <span class="dt">y =</span> pop)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>() <span class="op">+</span>
<span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Time&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Whale Population&quot;</span>)
}</code></pre></div>
<p>We are now ready for a simulation. The results are graphed in Figure <a href="application-whales-in-an-ocean.html#fig:whalesimgraph">13.1</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">oceanSim</span>(<span class="dt">steps =</span> <span class="dv">200</span>, <span class="dt">males =</span> <span class="dv">15</span>, <span class="dt">females =</span> <span class="dv">15</span>,
         <span class="dt">animate =</span> <span class="ot">FALSE</span>, <span class="dt">seed =</span> <span class="dv">3030</span>)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:whalesimgraph"></span>
<img src="r-notes_files/figure-html/whalesimgraph-1.png" alt="Simulated whale population.  Sadly, they all die after about 130 days." width="60%" />
<p class="caption">
Figure 13.1: Simulated whale population. Sadly, they all die after about 130 days.
</p>
</div>
<p>You should try running the simulation yourself a few times, for differing initial numbers of whales. If you like you can watch the whales move about by setting <code>animate</code> to <code>TRUE</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">oceanSim</span>(<span class="dt">steps =</span> <span class="dv">200</span>, <span class="dt">males =</span> <span class="dv">15</span>, <span class="dt">females =</span> <span class="dv">15</span>,
         <span class="dt">animate =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>You might also wish to explore varying the <code>starve</code> parameter: recall that the higher it is, the lower the long-term stable whale population will be. In order to better detect long-term stable population sizes, you will want to work with more steps, and you should turn off the step-by-step-animation, thus:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">oceanSim</span>(<span class="dt">steps =</span> <span class="dv">1000</span>, <span class="dt">males =</span> <span class="dv">60</span>, <span class="dt">females =</span> <span class="dv">60</span>,
         <span class="dt">starve =</span> <span class="fl">2.5</span>, <span class="dt">animate =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>The object-oriented approach to simulation is not necessarily the quickest approach: R6 objects do require a bit more time for computation, as compared to a system that stores relevant information about the population in vectors or in a data frame. On the other hand the object-oriented approach makes it easy to encode information about each individual whale as it proceeds through time. In larger applications, an object-oriented approach to programming can result in code that is relatively easy to read and to modify, albeit at some cost in terms of speed.</p>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="method-chaining.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="generic-function-oo.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": ["r-notes.pdf"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
